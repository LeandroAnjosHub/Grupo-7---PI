<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AeroControl - Resumo semanal - Ricken Scharlack</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body onload="estadoMaquinas(), estadoSetor(), plotarSetor2(), plotarSetor3()">
    <div class="container">
        <aside class="sidebar">
            <img src="img/Protótipo Dashboard.png" alt="">
            <a href="./index.html" class="sidebar-btn">RESUMO</a>
            <a href="../martinez/index.html" class="sidebar-btn">COMPARAR</a>
            <a class="sidebar-btn">SAIR</a>
        </aside>
        <main class="main-content">
            <h1>PAINEL DE RESUMO SEMANAL</h1>

            <div class="painel">

                <div class="configGraficos">
                    <canvas id="grafico"></canvas>
                </div>

                <div class="painel2">
                    <div class="alertas" style="border: 3px solid #c02f1b; box-shadow: 1px 1px 8px #c02f1b;">
                        <div class="corAlerta" style="background-color: #c02f1b; color: white;">
                        </div>
                        <div class="descricao">
                            <h1>ALERTA</h1>
                            <p>CPU ou RAM excedeu 80% de uso</p>
                        </div>
                    </div>

                    <div class="alertas" style="border: 3px solid #EFCA08; box-shadow: 1px 1px 8px #EFCA08;">
                        <div class="corAlerta" style="background-color: #EFCA08; color: black;">
                        </div>
                        <div class="descricao">
                            <h1>ATENÇÃO</h1>
                            <p>O uso de CPU ou RAM esteve entre 50% e 80%</p>
                        </div>
                    </div>

                    <div class="alertas" style="border: 3px solid #0f520c; box-shadow: 1px 1px 8px #0f520c;">
                        <div class="corAlerta" style="background-color: #0f520c; color: white;">
                        </div>
                        <div class="descricao">
                            <h1>ESTÁVEL</h1>
                            <p>O uso de CPU e RAM esteve abaixo do 50%</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="titulo">
                    <h2>SETORES</h2>
                </div>

                <div class="alertChart">

                    <div class="despache">
                        <div class="setor">
                            <p>Setor: Despache de voo</p> <br>
                            <p>Máquinas: 17</p>
                        </div>
                        <div class="maisDetalhes">
                            <button>Mais <br> Detalhes</button>
                        </div>
                        <div class="conteudo">
                            <p>Máquinas ao <br> longo da semana:</p>
                        </div>
                        <div class="metricas">
                            <div class="configGraficos2">
                                <canvas id="grafico2"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="torre">
                        <div class="setor">
                            <p>Setor: Torre de controle</p> <br>
                            <p>Máquinas: 17</p>
                        </div>
                        <div class="maisDetalhes">
                            <button>Mais <br> Detalhes</button>
                        </div>
                        <div class="conteudo">
                            <p>Máquinas ao <br> longo da semana:</p>
                        </div>
                        <div class="metricas">
                            <div class="configGraficos3">
                                <canvas id="grafico3"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="meteorologia">
                        <div class="setor">
                            <p>Setor: Centro de meteorologia </p> <br>
                            <p>Máquinas: 17</p>
                        </div>
                        <div class="maisDetalhes" style="margin-left: -1.6rem;">
                            <button>Mais <br> Detalhes</button>
                        </div>
                        <div class="conteudo">
                            <p>Máquinas ao <br> longo da semana:</p>
                        </div>
                        <div class="metricas">

                            <div class="configGraficos4">
                                <canvas id="grafico4"></canvas>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>

</html>

<script>

    function plotar(resposta) {
        const data = {
            labels: ['Alerta', 'Atenção', 'Estável'],
            datasets: [
                {
                    label: 'Máquinas',
                    borderColor: ['black'],
                    data: [],
                    backgroundColor: ['#c02f1b', '#EFCA08', '#0f520c'],
                }
            ]
        };

        console.log(resposta)
        data.datasets[0].data.push(resposta[0].AlertasTotais);
        data.datasets[0].data.push(resposta[0].AtencaoTotais);
        data.datasets[0].data.push((resposta[0].DadosTotais) - (resposta[0].AtencaoTotais + resposta[0].AlertasTotais));


        const config = {
            type: 'pie',
            data: data,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Maquinas que ficaram:'
                    }
                }
            },
        };

        let myChart = new Chart(
            document.getElementById('grafico'),
            config
        );
    }

    ///////////////////////////////////////////////////

    function plotarSetor(resposta) {

        const data = {
            labels: ['Alerta', 'Atenção', 'Estável'],
            datasets: [
                {
                    label: ['Máquina'],
                    data: [20, 22, 31],
                    borderColor: ['white'],
                    backgroundColor: ['#c02f1b', '#EFCA08', '#0f520c'],
                }
            ]
        };
        console.log(resposta)

        const config = {
            type: 'bar',
            data: data,
            options: {
                indexAxis: 'y',
                // Elements options apply to all of the options unless overridden in a dataset
                // In this case, we are setting the border of each horizontal bar to be 2px wide
                elements: {
                    bar: {
                        borderWidth: 2,
                    }
                },
                responsive: true,
                plugins: {
                    legend: {
                        display: false,
                        position: '',
                    },
                    title: {
                        display: false,
                        text: ''
                    }
                }
            },
        };

        let myChart = new Chart(
            document.getElementById('grafico2'),
            config
        );
        // fimSetor1

    }

    function plotarSetor2(resposta) {
        // comecoSetor2
        const data2 = {
            labels: ['Alerta', 'Atenção', 'Estável'],
            datasets: [
                {
                    label: ['Máquina'],
                    data: [11, 22, 21],
                    borderColor: ['white'],
                    backgroundColor: ['#c02f1b', '#EFCA08', '#0f520c'],
                }
            ]
        };
        console.log(resposta)

        const config2 = {
            type: 'bar',
            data2: data2,
            options: {
                indexAxis: 'y',
                // Elements options apply to all of the options unless overridden in a dataset
                // In this case, we are setting the border of each horizontal bar to be 2px wide
                elements: {
                    bar: {
                        borderWidth: 2,
                    }
                },
                responsive: true,
                plugins: {
                    legend: {
                        display: false,
                        position: '',
                    },
                    title: {
                        display: false,
                        text: ''
                    }
                }
            },
        };

        let myChart2 = new Chart(
            document.getElementById('grafico3'),
            config2
        );
        // fimSetor2
    }

    function plotarSetor3(resposta){
        // comecoSetor3
        const data3 = {
            labels: ['Alerta', 'Atenção', 'Estável'],
            datasets: [
                {
                    label: ['Máquina'],
                    data: [3, 4, 3],
                    borderColor: ['white'],
                    backgroundColor: ['#c02f1b', '#EFCA08', '#0f520c'],
                }
            ]
        };
        console.log(resposta)

        const config3 = {
            type: 'bar',
            data3: data3,
            options: {
                indexAxis: 'y',
                // Elements options apply to all of the options unless overridden in a dataset
                // In this case, we are setting the border of each horizontal bar to be 2px wide
                elements: {
                    bar: {
                        borderWidth: 2,
                    }
                },
                responsive: true,
                plugins: {
                    legend: {
                        display: false,
                        position: '',
                    },
                    title: {
                        display: false,
                        text: ''
                    }
                }
            },
        };

        let myChart3 = new Chart(
            document.getElementById('grafico4'),
            config3
        );

    }

</script>